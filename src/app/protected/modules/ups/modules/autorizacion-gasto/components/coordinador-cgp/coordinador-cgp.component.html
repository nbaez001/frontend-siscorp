

<!-- FILTROS -->
<mat-accordion class="filtros">
  <mat-expansion-panel [expanded]="true">
    <mat-expansion-panel-header>
      <mat-panel-title>
          <img src="assets/images/busqueda.png" width="26px" height="26px"><strong style="color: white;">FILTROS DE BÚSQUEDA</strong>
      </mat-panel-title>
    </mat-expansion-panel-header>

    <br>
    <!-- INPUTS -->
    <div class="inputs" [formGroup]="filtrosForm" fxLayout.xl="row" fxLayout.lg="row">
      


      <mat-form-field appearance="outline">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
        <mat-label >TAMBO</mat-label>
        <input  matInput formControlName="desProyectoFrmCtrl">
      </mat-form-field>
 

      <mat-form-field appearance="outline">
        <mat-label>N° CÓDIGO</mat-label>
        <input matInput formControlName="codigoFrmCtrl">
      </mat-form-field>


      <mat-form-field appearance="outline">
        <mat-label>N° CONVENIO</mat-label>
        <input matInput formControlName="codDocFrmCtrl">
      </mat-form-field>
   
     <!--  <mat-form-field appearance="outline">
        <mat-label>INICIO DE EJECUCIÓN</mat-label>
        <input matInput [matDatepicker]="picker1" readonly (click)="picker1.open()" formControlName="fechaRegDesdeFrmCtrl">
        <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
        <mat-datepicker #picker1></mat-datepicker>
      </mat-form-field>
  
      <mat-form-field appearance="outline">
        <mat-label>TÉRMINO DE EJECUCIÓN</mat-label>
        <input matInput [matDatepicker]="picker2" readonly (click)="picker2.open()" formControlName="fechaRegHastaFrmCtrl">
        <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
        <mat-datepicker #picker2></mat-datepicker>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>ESTADO</mat-label>
        <mat-select  formControlName="estadoFrmCtrl" class = "tamanio-seleccionar">
        <mat-option  [value]="-1">--SELECCIONAR--</mat-option>
        <mat-option *ngFor="let est of dataItemEstado?.estados" [value]="est.idCodigo">{{est.cidNombre}}</mat-option>
        </mat-select>                                               
      </mat-form-field> -->
  
      <div class="acciones">
        <button mat-mini-fab (click)="buscarPerfilPrefactibilidad($event)" [disabled]="disableBuscar"><mat-icon matTooltip="búsqueda">search</mat-icon></button>
        <button mat-mini-fab class="mat-grey-300-bg" (click)="reiniciar()"   ><mat-icon matTooltip="Limpiar filtros de búsqueda">clear_all</mat-icon></button>
      </div>
    </div>
    <!-- INPUTS -->

  </mat-expansion-panel>
</mat-accordion>
<!-- FILTROS -->

<!-- BANDEJA -->
<div class="bandeja mat-elevation-z6">

  <table mat-table [dataSource]="dataSource">

    <ng-container matColumnDef="item">
        <th mat-header-cell *matHeaderCellDef class="formato_header_table"> ITEM</th>
        <td mat-cell *matCellDef="let prefac" (click)="getRecord(prefac)">{{prefac.item}} </td>
    </ng-container>

    <!-- <ng-container matColumnDef="nroCodigo" >
      <th mat-header-cell *matHeaderCellDef class="formato_header_table"> N° CÓDIGO </th>
      <td mat-cell *matCellDef="let prefac" (click)="getRecord(prefac)"> {{prefac.codigoUnico}} </td>
    </ng-container>

    <ng-container matColumnDef="nroConvenio">
      <th mat-header-cell *matHeaderCellDef class="formato_header_table"> N° CONVENIO</th>
      <td mat-cell *matCellDef="let prefac" (click)="getRecord(prefac)"> {{prefac.codigo}} </td>
    </ng-container>
 -->
    
    <ng-container matColumnDef="tambo">
      <th mat-header-cell *matHeaderCellDef class="formato_header_table"> TAMBO</th>
      <td mat-cell *matCellDef="let prefac" matTooltip="Creaciòn del Centro de Servicios Tambo en el Centro Poblado Quille - Omacha"  
      matTooltipClass="formato-tooltip" (click)="getRecord(prefac)"> {{prefac.descripcion}} </td>
    </ng-container>


    <ng-container matColumnDef="inicioObra">
      <th mat-header-cell *matHeaderCellDef class="formato_header_table" style="text-align: center;">INICIO<br>DE OBRA </th>
      <td mat-cell *matCellDef="let prefac" (click)="getRecord(prefac)" style="text-align: center;">{{prefac.fecInicioEjecucion}} </td>
    </ng-container>

    <ng-container matColumnDef="planEjecucion">
      <th mat-header-cell *matHeaderCellDef class="formato_header_table" style="text-align: center;">PLAZO <br>DE EJECUCIÓN</th>
      <td mat-cell *matCellDef="let prefac" (click)="getRecord(prefac)" style="text-align: center;"> 120 días</td>
    </ng-container>

    <ng-container matColumnDef="terminoObra">
      <th mat-header-cell *matHeaderCellDef class="formato_header_table" style="text-align: center;">TÉRMINO DE OBRA <br> PROGRAMADO</th>
      <td mat-cell *matCellDef="let prefac" (click)="getRecord(prefac)" style="text-align: center;"> {{prefac.fecFinEjecucion}} </td>
    </ng-container>

    <ng-container matColumnDef="plazoEjecucionReal">
      <th mat-header-cell *matHeaderCellDef class="formato_header_table" style="text-align: center;">PLAZO EJECUCIÓN <br>REAL</th>
      <td mat-cell *matCellDef="let prefac" (click)="getRecord(prefac)" style="text-align: center;"> 50 días </td>
    </ng-container>

    <ng-container matColumnDef="ultimaActualizacion">
      <th mat-header-cell *matHeaderCellDef class="formato_header_table" style="text-align: center;">ÚLTIMA <br> ACTUALIZACIÓN</th>
      <td mat-cell *matCellDef="let prefac" (click)="getRecord(prefac)" style="text-align: center;"> {{prefac.fecUltimaActualizacion}} </td>
    </ng-container>


    <ng-container matColumnDef="avanceFisico">
      <th mat-header-cell *matHeaderCellDef class="formato_header_table" style="text-align: center;">AVANCE <br>FÍSICO</th>
      <td mat-cell *matCellDef="let prefac" (click)="getRecord(prefac)" style="text-align: center;"> 10% </td>
    </ng-container>

    <ng-container matColumnDef="avanceFinanciero">
      <th mat-header-cell *matHeaderCellDef class="formato_header_table" style="text-align: center;">AVANCE <br> FINANCIERO</th>
      <td mat-cell *matCellDef="let prefac" (click)="getRecord(prefac)" style="text-align: center;"> 20% </td>
    </ng-container>




    <ng-container matColumnDef="estado">
      <th mat-header-cell *matHeaderCellDef class="formato_header_table" style="text-align: center;">ESTADO</th>
      
      <td mat-cell *matCellDef="let prefac" > 
        <span *ngIf="prefac.cidEstado == '001'" style="color: rgb(199, 0, 0); font-weight: 500; font-family:Arial, Helvetica, sans-serif">
            {{prefac.estado}} 
        </span> 
        <span *ngIf="prefac.cidEstado != '001'" style="color:black">
            {{prefac.estado}} 
        </span> 
       </td>
    </ng-container>

    <ng-container matColumnDef="prestandoServicio">
      <th mat-header-cell *matHeaderCellDef class="formato_header_table" style="text-align: center;">PRESTANDO<br>SERVICIO</th>
      <td mat-cell *matCellDef="let prefac" (click)="getRecord(prefac)" style="text-align: center;"> no </td>
    </ng-container>
  
    <ng-container matColumnDef="acciones">
      <th mat-header-cell *matHeaderCellDef class="formato_header_table-acciones">ACCIONES</th>
      <td mat-cell *matCellDef="let prefac">

      <div *ngIf = "prefac.cidEstado == '001'">
          
        <button mat-icon-button color="primary" (click)="verProyecto(prefac.idCodigo)" matTooltip="Descargar documentos">
            <mat-icon>remove_red_eye</mat-icon>
        </button>

        <button mat-icon-button color="primary" (click)="verCronograma(prefac.idCodigo)" matTooltip="Cronogramas">
            <mat-icon>library_books</mat-icon>
        </button>

        <button mat-icon-button color="primary" (click)="verCotizaciones(prefac.idCodigo)" matTooltip="Autorización de gasto">
            <mat-icon>assignment</mat-icon>
        </button>

        <button mat-icon-button color="primary" (click)="bandejaTrabajador(prefac.idCodigo)" matTooltip="Trabajador">
            <mat-icon>person_add</mat-icon>
        </button>


      </div>

      <div *ngIf = "prefac.cidEstado == '002' ||  prefac.cidEstado == '003' || prefac.cidEstado == '004'">
    
        <button mat-icon-button color="primary" (click)="verProyecto(prefac.idCodigo)" matTooltip="Descargar documentos">
            <mat-icon>remove_red_eye</mat-icon>
        </button>
        
      </div>

      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="columnas" class = "mat-header-row-formato"></tr>
  <!--   <tr mat-row [ngClass]="{'background_row': row.cidEstado == '001'}" *matRowDef="let row; columns: columnas"></tr> -->
 <!--  <tr mat-row *matRowDef="let row; columns: columnas" (click)="getRecord(row)"></tr> -->
  <tr mat-row *matRowDef="let row; columns: columnas"></tr>
  </table>

    <div class="empty" *ngIf="!isLoading && dataSource === null">
        No existe datos para mostrar en la tabla
    </div>
  <!--      
    <mat-toolbar>
      <mat-toolbar-row class="paginacion-right mat-toolbar-fondo">
        <div *ngIf="dataSource !== null" style="float: left !important;">
          <mat-icon svgIcon="excel-pais" (click)="descargarExcel($event)" class="excel-icon-top"  matTooltip="Descargar Excel"></mat-icon>
          <span class="example-spacer"></span>   
        </div>
        <div>
            <mat-paginator 
            [length]="total" 
            [pageIndex]="pagina - 1" 
            [pageSize]="cantidad" 
            [showFirstLastButtons]="true"
            [pageSizeOptions]="[15, 30, 50]" 
            (page)="cambiarPagina($event)">
            </mat-paginator>

        </div>
      </mat-toolbar-row>
    </mat-toolbar>  -->
 
</div>
<!-- BANDEJA -->



